<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NeuralPulse AI</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body, html { 
            margin: 0; padding: 0; height: 100vh; overflow: hidden; 
            background-color: #050a18; color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            user-select: none;
            touch-action: manipulation;
        }

        /* Фоновый интерфейс */
        .bot-interface { 
            background: linear-gradient(rgba(5, 10, 24, 0.85), rgba(5, 10, 24, 0.85)), 
                        url('images/images.jpeg') center/cover no-repeat; 
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
            justify-content: space-between;
            align-items: center;
        }

        /* Хедер с логотипом и счетом */
        .header { padding: 20px; text-align: center; z-index: 10; }
        
        .blinking-logo { 
            width: 80px; 
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            animation: pulse-glow 2s infinite ease-in-out; 
            border: 2px solid #00d4ff;
        }

        @keyframes pulse-glow { 
            0%, 100% { filter: drop-shadow(0 0 5px #ff00ea); transform: scale(1); } 
            50% { filter: drop-shadow(0 0 20px #00d4ff); transform: scale(1.05); } 
        }

        #score-container { 
            font-size: 48px; 
            font-weight: bold; 
            text-shadow: 0 0 20px #bf00ff; 
            margin-top: 10px; 
            font-variant-numeric: tabular-nums;
        }
        .currency { font-size: 20px; color: #00d4ff; margin-left: 5px; }

        /* Центральная область тапалки */
        .game-area { 
            flex-grow: 1; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            perspective: 1000px; 
            width: 100%;
        }
        
        .core-slot { 
            width: 280px; height: 280px; 
            position: relative;
            display: flex; align-items: center; justify-content: center; 
        }

        .tap-target { 
            width: 100%; height: 100%; 
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.05s ease;
            -webkit-tap-highlight-color: transparent;
            box-shadow: 0 0 50px rgba(191, 0, 255, 0.3);
            object-fit: cover;
        }

        /* Вылетающие цифры +1 */
        .particle {
            position: absolute;
            color: #ffffff;
            font-weight: 900;
            font-size: 35px;
            pointer-events: none;
            text-shadow: 0 0 10px #bf00ff, 0 0 20px #00d4ff;
            animation: moveUpFade 0.8s ease-out forwards;
            z-index: 1000;
        }

        @keyframes moveUpFade {
            0% { transform: translate(-50%, 0) scale(0.5); opacity: 0; }
            20% { opacity: 1; transform: translate(-50%, -40px) scale(1.2); }
            100% { transform: translate(-50%, -160px) scale(1); opacity: 0; }
        }

        /* Нижнее меню */
        .footer-nav { 
            width: 100%; 
            padding-bottom: 30px; 
            display: flex; 
            justify-content: center; 
        }
        .bottom-nav-image { 
            width: 90%; 
            max-width: 400px; 
            border-radius: 20px;
            filter: drop-shadow(0 0 10px rgba(0, 212, 255, 0.4));
        }
    </style>
</head>
<body>

    <div class="bot-interface">
        <div class="header">
            <img src="images/unnamed (4).jpg" class="blinking-logo" alt="logo">
            <div id="score-container">0<span class="currency">PULSE</span></div>
        </div>

        <div class="game-area">
            <div class="core-slot">
                <img src="images/unnamed (3).jpg" class="tap-target" id="tap-btn" alt="core">
            </div>
        </div>

        <div class="footer-nav">
            <img src="images/unnamed (2).jpg" class="bottom-nav-image" alt="menu">
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        const tapBtn = document.getElementById('tap-btn');
        const scoreEl = document.getElementById('score-container');
        
        let score = parseInt(localStorage.getItem('pulse_score')) || 0;
        scoreEl.innerHTML = `${score}<span class="currency">PULSE</span>`;

        // Инициализация Telegram WebApp
        tg.ready();
        tg.expand();
        tg.enableClosingConfirmation();

        // Функция обработки тапа
        function handleTap(e) {
            e.preventDefault();
            
            // Настройка вибрации через Telegram SDK
            if (tg.HapticFeedback) {
                tg.HapticFeedback.impactOccurred('medium');
            }

            score += 1;
            scoreEl.innerHTML = `${score}<span class="currency">PULSE</span>`;
            localStorage.setItem('pulse_score', score);

            // Анимация нажатия
            tapBtn.style.transform = 'scale(0.95) rotate(-2deg)';
            setTimeout(() => {
                tapBtn.style.transform = 'scale(1) rotate(0deg)';
            }, 50);

            // Создание вылетающего текста +1
            const touch = e.touches ? e.touches[0] : e;
            const x = touch.pageX;
            const y = touch.pageY;

            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.textContent = '+1';
            particle.style.left = `${x}px`;
            particle.style.top = `${y}px`;

            document.body.appendChild(particle);

            // Удаляем элемент после завершения анимации
            particle.addEventListener('animationend', () => {
                particle.remove();
            });
        }

        // Поддержка как мобильных касаний, так и кликов (для теста)
        tapBtn.addEventListener('touchstart', handleTap);
        tapBtn.addEventListener('mousedown', (e) => {
            if (window.innerWidth > 1024) handleTap(e);
        });

    </script>
</body>
</html>
